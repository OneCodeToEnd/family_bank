# 更新日志

本文档记录账清应用的版本更新历史。

## [1.1.0] - 2026-02-17

### 新增功能
- ✅ AI智能问答Agent（自然语言查询账务数据）
- ✅ 多会话管理（创建、切换、置顶、删除）
- ✅ Agent记忆系统（用户反馈学习）
- ✅ 数据库工具集（只读SQL查询、表结构查看）
- ✅ 消息反馈机制（点赞/点踩）

### 数据库
- 数据库版本: V11 → V12
- 新增表: `agent_memories`（Agent记忆）、`chat_sessions`（对话会话）

---

## [1.0.0] - 2026-02-07

### 新增功能
- ✅ 家庭组与成员管理
- ✅ 多账户管理（支付宝、微信、银行卡、现金等）
- ✅ 层级分类树结构
- ✅ 交易记录管理
- ✅ CSV/Excel账单导入
- ✅ 邮箱账单自动获取（IMAP）
- ✅ 智能分类规则匹配
- ✅ AI智能分类（通义千问、DeepSeek）
- ✅ 自动学习优化
- ✅ 数据统计与分析
- ✅ 预算管理（年度预算、月度统计、预算预警）
- ✅ 数据加密与隐私保护
- ✅ WebDAV同步功能
- ✅ 本地备份导出导入

### 数据库
- 数据库版本: V10
- 新增表: `counterparty_groups`, `annual_budgets`, `ai_models`, `email_configs`, `http_logs`
- 删除表: `budgets`（已被annual_budgets替代）

### 技术栈
- Flutter 3.6+
- Material Design 3
- Provider状态管理
- SQLite本地存储

---

## 开发历史

### V12 - 对话会话
- 添加对话会话表
- 支持多会话管理和消息持久化
- 会话置顶和自动标题生成

### V11 - Agent记忆
- 添加Agent记忆表
- 支持用户偏好记忆存储
- 记忆类型分类（like/dislike/note）

### V10 - 对手方分组
- 添加对手方分组表
- 支持交易对手方的智能分组
- 自动识别相似对手方

### V9 - 数据库清理
- 删除未使用的budgets表
- 优化数据库结构

### V8 - 预算类型
- 为annual_budgets表添加type字段
- 支持收入和支出预算分类

### V7 - 年度预算
- 添加年度预算表
- 支持年度和月度预算管理

### V6 - AI模型配置
- 添加AI模型配置表
- 支持多AI提供商管理
- API密钥加密存储

### V5 - 邮箱配置
- 添加邮箱配置表
- 支持IMAP账单自动获取
- 邮箱密码加密存储

### V4 - HTTP日志
- 添加HTTP请求日志表
- 用于调试AI API调用
- 记录请求和响应详情

### V3 - 增强分类规则
- 添加匹配类型字段
- 添加置信度评分
- 支持自动学习功能
- 添加别名和对手方匹配

### V2 - 交易对方
- 添加交易对方字段
- 优化分类匹配准确度

### V1 - 初始版本
- 基础数据结构
- 核心功能实现

---

## 路线图

### 计划功能

#### 认证与安全
- 📋 用户登录认证
- 📋 指纹/面容识别
- 📋 数据加密增强

#### 多设备同步
- 📋 云端同步（自建服务器）
- 📋 冲突解决机制
- 📋 增量同步优化

#### 高级分析
- 📋 自定义报表
- 📋 趋势预测
- 📋 财务健康评分

#### 用户体验
- 📋 主题自定义
- 📋 小组件支持
- 📋 快捷操作

---

## 版本说明

### 版本号规则

采用语义化版本号: `主版本号.次版本号.修订号`

- **主版本号**: 重大架构变更或不兼容更新
- **次版本号**: 新功能添加
- **修订号**: Bug修复和小改进

### 数据库版本

数据库版本独立管理，确保数据迁移的兼容性。

当前数据库版本: **V12**

---

## 贡献

欢迎提交Issue和Pull Request！

查看 [开发指南](../development/setup.md) 了解如何参与开发。