---
description: å¼€å§‹éœ€æ±‚å¼€å‘ï¼Œæ”¯æŒå®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å¤š Agent åä½œã€æ–­ç‚¹ç»­åšå’Œå¹¶è¡Œå¼€å‘
allowed-tools: ["Read", "Write", "Edit", "Bash", "Grep", "Glob", "Task"]
argument-hint: <requirement-description>
---

# éœ€æ±‚å¼€å‘å‘½ä»¤

å¼€å§‹éœ€æ±‚å¼€å‘ï¼š**$ARGUMENTS**

## å‘½ä»¤è¯´æ˜

æ­¤å‘½ä»¤ç”¨äºå¯åŠ¨ä¸€ä¸ªå®Œæ•´çš„éœ€æ±‚å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
- éœ€æ±‚çŠ¶æ€ç®¡ç†ï¼ˆæ”¯æŒæš‚åœå’Œæ¢å¤ï¼‰
- å¤š Agent åä½œï¼ˆè·¯ç”± â†’ è®¾è®¡ â†’ å®ç° â†’ æµ‹è¯•ï¼‰
- è‡ªåŠ¨åŠ è½½ç›¸å…³ä¸Šä¸‹æ–‡
- å†å²å‘ç‚¹æé†’
- å¹¶è¡Œå¼€å‘æ”¯æŒ

---

## Phase 0: éœ€æ±‚çŠ¶æ€æ£€æŸ¥

### Step 0.1: ç¡®ä¿çŠ¶æ€ç›®å½•å­˜åœ¨

```bash
mkdir -p .claude/state/requirements
```

### Step 0.2: è¯»å–éœ€æ±‚ç´¢å¼•

è¯»å– .claude/state/requirements/index.jsonï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨åŒ¹é…çš„éœ€æ±‚ã€‚

### Step 0.3: æ£€æŸ¥æ˜¯å¦ä¸ºå·²å­˜åœ¨çš„éœ€æ±‚

#### æœç´¢åŒ¹é…é€»è¾‘ï¼š

ç²¾ç¡®åŒ¹é…éœ€æ±‚ IDï¼ˆå¦‚ REQ-001ï¼‰
æ¨¡ç³ŠåŒ¹é…éœ€æ±‚æ ‡é¢˜ï¼ˆå…³é”®è¯åŒ¹é…ï¼‰

##### å¦‚æœéœ€æ±‚å·²å­˜åœ¨ï¼š

```
ğŸ“‹ å‘ç°å·²å­˜åœ¨çš„éœ€æ±‚è®°å½•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éœ€æ±‚ID:     REQ-001                             â”‚
â”‚ æ ‡é¢˜:       {title}                             â”‚
â”‚ å½“å‰çŠ¶æ€:   {status}                            â”‚
â”‚ å½“å‰é˜¶æ®µ:   {phase}                             â”‚
â”‚ åˆ›å»ºæ—¶é—´:   {created_at}                        â”‚
â”‚ æœ€åæ›´æ–°:   {updated_at}                        â”‚
â”‚ Gitåˆ†æ”¯:    {branch}                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†å²è®°å½•:
{history}

è¯·é€‰æ‹©æ“ä½œï¼š
1. ç»§ç»­è¯¥éœ€æ±‚å¼€å‘ï¼ˆä» {phase} é˜¶æ®µç»§ç»­ï¼‰
2. é‡æ–°å¼€å§‹è¯¥éœ€æ±‚
3. åˆ›å»ºæ–°éœ€æ±‚
4. å–æ¶ˆ

è¯·è¾“å…¥é€‰é¡¹ (1/2/3/4):
```

å¦‚æœé€‰æ‹©ç»§ç»­ï¼ŒåŠ è½½éœ€æ±‚çŠ¶æ€ï¼Œè·³è½¬åˆ°å¯¹åº”é˜¶æ®µã€‚

##### å¦‚æœæ˜¯æ–°éœ€æ±‚ï¼š

ç”Ÿæˆæ–°çš„éœ€æ±‚ IDï¼Œåˆ›å»ºéœ€æ±‚çŠ¶æ€æ–‡ä»¶ã€‚

### Step 0.4: åˆ›å»ºéœ€æ±‚çŠ¶æ€æ–‡ä»¶

#### ç”Ÿæˆéœ€æ±‚ IDï¼š

REQ-{åºå·ï¼Œ3ä½æ•°å­—ï¼Œå¦‚ 001}

#### åˆ›å»ºçŠ¶æ€æ–‡ä»¶ .claude/state/requirements/REQ-{id}.jsonï¼š

```json
{
  "id": "REQ-001",
  "title": "$ARGUMENTS",
  "description": "$ARGUMENTS",
  "status": "pending",
  "phase": "routing",
  "priority": "medium",
  "created_at": "{{timestamp}}",
  "updated_at": "{{timestamp}}",
  "branch": "feature/req-001",
  "design_doc": null,
  "test_report": null,
  "related_services": [],
  "context_files": [],
  "pitfalls_checked": [],
  "history": [
    {
      "phase": "created",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "éœ€æ±‚åˆ›å»º",
      "agent": "system"
    }
  ],
  "tasks": [],
  "metadata": {
    "creator": "user",
    "source": "/req-dev command"
  }
}
```

#### æ›´æ–°ç´¢å¼•æ–‡ä»¶ .claude/state/requirements/index.jsonï¼š

```json
{
  "requirements": [
    {
      "id": "REQ-001",
      "title": "$ARGUMENTS",
      "status": "pending",
      "phase": "routing",
      "file": "REQ-001.json",
      "created_at": "{{timestamp}}",
      "updated_at": "{{timestamp}}"
    }
  ],
  "last_id": 1,
  "last_updated": "{{timestamp}}"
}
```

#### Step 0.5: è¾“å‡ºéœ€æ±‚åˆ›å»ºç¡®è®¤

```
âœ… éœ€æ±‚å·²åˆ›å»º

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éœ€æ±‚ID:     REQ-001                             â”‚
â”‚ æ ‡é¢˜:       $ARGUMENTS                          â”‚
â”‚ çŠ¶æ€:       pending                             â”‚
â”‚ Gitåˆ†æ”¯:    feature/req-001                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­£åœ¨è¿›å…¥ Phase 1: ä»»åŠ¡è·¯ç”±...
```

## Phase 1: ä»»åŠ¡è·¯ç”±

### Step 1.1: æ›´æ–°éœ€æ±‚çŠ¶æ€

æ›´æ–° .claude/state/requirements/REQ-{id}.jsonï¼š

```json
{
  "phase": "routing",
  "status": "in_progress",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "routing",
      "status": "started",
      "timestamp": "{{timestamp}}",
      "note": "å¼€å§‹ä»»åŠ¡è·¯ç”±",
      "agent": "phase-router"
    }
  ]
}
```
### Step 1.2: è°ƒç”¨ @phase-router

ä½¿ç”¨ Task å·¥å…·è°ƒç”¨ @phase-router Agentï¼š

```markdown
åˆ†æä»¥ä¸‹éœ€æ±‚ï¼Œç¡®å®šä»»åŠ¡ç±»å‹å’Œæ‰§è¡Œè®¡åˆ’ï¼š

éœ€æ±‚æè¿°ï¼š$ARGUMENTS

è¯·å®Œæˆä»¥ä¸‹å·¥ä½œï¼š
1. ç†è§£éœ€æ±‚æ„å›¾
2. è¯†åˆ«æ¶‰åŠçš„æœåŠ¡å’Œæ¨¡å—
3. ç¡®å®šéœ€è¦åŠ è½½çš„ä¸Šä¸‹æ–‡æ–‡ä»¶
4. åˆ¶å®šæ‰§è¡Œè®¡åˆ’ï¼ˆè®¾è®¡ â†’ å®ç° â†’ æµ‹è¯•ï¼‰
5. è¯†åˆ«æ½œåœ¨é£é™©å’Œä¾èµ–

è¾“å‡ºæ ¼å¼ï¼š
{
  "task_type": "feature|bugfix|refactor|optimization",
  "complexity": "low|medium|high",
  "related_services": ["service1", "service2"],
  "context_files": ["path/to/context"],
  "execution_plan": [
    {"phase": "design", "tasks": [...]},
    {"phase": "implement", "tasks": [...]},
    {"phase": "test", "tasks": [...]}
  ],
  "risks": ["risk1", "risk2"],
  "dependencies": ["dep1", "dep2"]
}
```

### Step 1.3: æ›´æ–°å½“å‰ä»»åŠ¡çŠ¶æ€

æ›´æ–° .claude/state/current-task.jsonï¼š

```json
{
  "requirement_id": "REQ-001",
  "task_type": "{from phase-router}",
  "complexity": "{from phase-router}",
  "target_agent": "design-manager",
  "context_files": ["{from phase-router}"],
  "priority": "medium",
  "dependencies": [],
  "status": "routed",
  "routed_at": "{{timestamp}}",
  "execution_plan": "{from phase-router}"
}
```

### Step 1.4: è·¯ç”±å®Œæˆ
æ›´æ–°éœ€æ±‚çŠ¶æ€ï¼š

```json
{
  "phase": "routing",
  "status": "completed",
  "related_services": ["{from phase-router}"],
  "context_files": ["{from phase-router}"],
  "history": [
    ...existing,
    {
      "phase": "routing",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "ä»»åŠ¡è·¯ç”±å®Œæˆï¼Œè¯†åˆ«åˆ° X ä¸ªç›¸å…³æœåŠ¡",
      "agent": "phase-router"
    }
  ]
}
```

âœ… Phase 1 å®Œæˆï¼šä»»åŠ¡è·¯ç”±

è¯†åˆ«ç»“æœï¼š
- ä»»åŠ¡ç±»å‹: {task_type}
- å¤æ‚åº¦: {complexity}
- ç›¸å…³æœåŠ¡: {related_services}
- éœ€åŠ è½½ä¸Šä¸‹æ–‡: {context_files}

æ­£åœ¨è¿›å…¥ Phase 2: ä¸Šä¸‹æ–‡åŠ è½½...


## Phase 2: ä¸Šä¸‹æ–‡åŠ è½½

### Step 2.1: åŠ è½½æœåŠ¡æ–‡æ¡£

æ ¹æ® Phase 1 è¯†åˆ«çš„ç›¸å…³æœåŠ¡ï¼ŒåŠ è½½å¯¹åº”çš„æŠ€æœ¯æ–‡æ¡£ï¼š

```bash
# æ£€æŸ¥æœåŠ¡æ–‡æ¡£æ˜¯å¦å­˜åœ¨
for service in {related_services}; do
  if [ -f "context/tech/services/${service}.md" ]; then
    echo "åŠ è½½æœåŠ¡æ–‡æ¡£: context/tech/services/${service}.md"
  else
    echo "âš ï¸ æœåŠ¡æ–‡æ¡£ä¸å­˜åœ¨: ${service}"
    echo "å»ºè®®æ‰§è¡Œ: /agent-project-kit:load-service ${service}"
  fi
done
```

è¯»å–å­˜åœ¨çš„æœåŠ¡æ–‡æ¡£ï¼š

è¯»å– context/tech/services/{service}.md

### Step 2.2: åŠ è½½å†å²ç»éªŒ

æœç´¢ context/experience/ ç›®å½•ä¸­ä¸éœ€æ±‚ç›¸å…³çš„ç»éªŒæ–‡æ¡£ï¼š

```bash
# æœç´¢ç›¸å…³ç»éªŒæ–‡æ¡£
grep -rl "{å…³é”®è¯}" context/experience/ 2>/dev/null || true
```

è¯»å–åŒ¹é…çš„ç»éªŒæ–‡æ¡£ã€‚

### Step 2.3: åŠ è½½ä¸šåŠ¡è§„åˆ™
æœç´¢ context/business/ ç›®å½•ä¸­ä¸éœ€æ±‚ç›¸å…³çš„ä¸šåŠ¡è§„åˆ™ï¼š

```bash
# æœç´¢ç›¸å…³ä¸šåŠ¡è§„åˆ™
grep -rl "{å…³é”®è¯}" context/business/ 2>/dev/null || true
```

è¯»å–åŒ¹é…çš„ä¸šåŠ¡è§„åˆ™æ–‡æ¡£ã€‚

### Step 2.4: å†å²å‘ç‚¹æé†’

é‡è¦ï¼šåœ¨ç»§ç»­ä¹‹å‰ï¼Œå¿…é¡»å‘ç”¨æˆ·å±•ç¤ºç›¸å…³çš„å†å²å‘ç‚¹ã€‚

```markdown
âš ï¸ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   å†å²å‘ç‚¹æé†’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• âš ï¸

æ ¹æ® context/experience/ ä¸­çš„è®°å½•ï¼Œæœ¬æ¬¡éœ€æ±‚éœ€è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ã€{å‘ç‚¹æ ‡é¢˜}ã€‘                                                â”‚
â”‚    æ¥æº: context/experience/{filename}.md                       â”‚
â”‚    ä¸¥é‡ç¨‹åº¦: é«˜                                                  â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚    {å‘ç‚¹ç®€è¦æè¿°}                                                â”‚
â”‚                                                                 â”‚
â”‚    âœ… æ£€æŸ¥é¡¹:                                                    â”‚
â”‚    - [ ] æ˜¯å¦å·²è€ƒè™‘æ­¤é—®é¢˜ï¼Ÿ                                      â”‚
â”‚    - [ ] æ˜¯å¦æŒ‰ç…§æ¨èåšæ³•å®ç°ï¼Ÿ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ã€{å‘ç‚¹æ ‡é¢˜}ã€‘                                                â”‚
â”‚    æ¥æº: context/experience/{filename}.md                       â”‚
â”‚    ä¸¥é‡ç¨‹åº¦: ä¸­                                                  â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚    {å‘ç‚¹ç®€è¦æè¿°}                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…±å‘ç° {N} ä¸ªç›¸å…³å†å²å‘ç‚¹ï¼Œè¯·ç¡®è®¤å·²äº†è§£åç»§ç»­ã€‚

æ˜¯å¦ç»§ç»­ï¼Ÿ(Y/n)
```

### Step 2.5: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "pitfalls_checked": [
    "context/experience/{file1}.md",
    "context/experience/{file2}.md"
  ],
  "context_files": [
    "context/tech/services/{service}.md",
    "context/experience/{file}.md",
    "context/business/{file}.md"
  ],
  "history": [
    ...existing,
    {
      "phase": "context_loading",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "åŠ è½½äº† X ä¸ªä¸Šä¸‹æ–‡æ–‡ä»¶ï¼Œå‘ç° Y ä¸ªå†å²å‘ç‚¹",
      "agent": "system"
    }
  ]
}
```
âœ… Phase 2 å®Œæˆï¼šä¸Šä¸‹æ–‡åŠ è½½

åŠ è½½çš„ä¸Šä¸‹æ–‡ï¼š
- æœåŠ¡æ–‡æ¡£: {count} ä¸ª
- ç»éªŒæ–‡æ¡£: {count} ä¸ª
- ä¸šåŠ¡è§„åˆ™: {count} ä¸ª
- å†å²å‘ç‚¹: {count} ä¸ªï¼ˆå·²æé†’ï¼‰

æ­£åœ¨è¿›å…¥ Phase 3: æ–¹æ¡ˆè®¾è®¡...

## Phase 3: æ–¹æ¡ˆè®¾è®¡

### Step 3.1: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "designing",
  "status": "in_progress",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "designing",
      "status": "started",
      "timestamp": "{{timestamp}}",
      "note": "å¼€å§‹æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡",
      "agent": "design-manager"
    }
  ]
}
```

### Step 3.2: è°ƒç”¨ @design-manager

ä½¿ç”¨ Task å·¥å…·è°ƒç”¨ @design-manager Agentï¼š


```markdown
è¯·ä¸ºä»¥ä¸‹éœ€æ±‚è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆï¼š

## éœ€æ±‚ä¿¡æ¯
- éœ€æ±‚ID: REQ-{id}
- éœ€æ±‚æè¿°: $ARGUMENTS
- ä»»åŠ¡ç±»å‹: {task_type}
- å¤æ‚åº¦: {complexity}

## ç›¸å…³ä¸Šä¸‹æ–‡
{å·²åŠ è½½çš„ä¸Šä¸‹æ–‡æ–‡ä»¶å†…å®¹æ‘˜è¦}

## å†å²å‘ç‚¹
{å·²è¯†åˆ«çš„å†å²å‘ç‚¹åˆ—è¡¨}

## è¦æ±‚
1. åˆ†ææŠ€æœ¯å¯è¡Œæ€§
2. è®¾è®¡æ¶æ„æ–¹æ¡ˆ
3. å®šä¹‰æ¥å£è§„èŒƒ
4. è®¾è®¡æ•°æ®æ¨¡å‹
5. åˆ¶å®šå®ç°ä»»åŠ¡åˆ—è¡¨
6. è¯†åˆ«æŠ€æœ¯é£é™©
7. è€ƒè™‘å†å²å‘ç‚¹çš„è§„é¿æªæ–½

## è¾“å‡º
1. è®¾è®¡æ–‡æ¡£ä¿å­˜åˆ°: context/tech/designs/REQ-{id}-{feature-name}.md
2. æ›´æ–°çŠ¶æ€æ–‡ä»¶: .claude/state/current-design.json
```

### Step 3.3: ç¡®è®¤è®¾è®¡æ–‡æ¡£ç”Ÿæˆ

æ£€æŸ¥è®¾è®¡æ–‡æ¡£æ˜¯å¦å·²ç”Ÿæˆï¼š

```bash
ls -la context/tech/designs/REQ-{id}*.md
```

### Step 3.4: æ›´æ–° current-design.json

ç¡®è®¤ .claude/state/current-design.json å·²æ›´æ–°ï¼š

```json
{
  "requirement_id": "REQ-001",
  "feature_name": "{feature_name}",
  "design_doc_path": "context/tech/designs/REQ-001-{feature-name}.md",
  "status": "ready_for_implementation",
  "created_at": "{{timestamp}}",
  "key_decisions": [
    "{å†³ç­–1}",
    "{å†³ç­–2}"
  ],
  "implementation_tasks": [
    {
      "id": 1,
      "description": "{ä»»åŠ¡æè¿°}",
      "priority": "high",
      "estimated_effort": "2h",
      "status": "pending",
      "dependencies": []
    },
    {
      "id": 2,
      "description": "{ä»»åŠ¡æè¿°}",
      "priority": "medium",
      "estimated_effort": "1h",
      "status": "pending",
      "dependencies": [1]
    }
  ],
  "related_services": ["{service1}", "{service2}"],
  "pitfalls_addressed": [
    {
      "pitfall": "{å‘ç‚¹æè¿°}",
      "mitigation": "{è§„é¿æªæ–½}"
    }
  ],
  "risks": [
    {
      "description": "{é£é™©æè¿°}",
      "probability": "medium",
      "impact": "high",
      "mitigation": "{åº”å¯¹æªæ–½}"
    }
  ]
}
```

### Step 3.5: è®¾è®¡è¯„å®¡

```markdown
ğŸ“‹ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å®Œæˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ“‹

è®¾è®¡æ–‡æ¡£: context/tech/designs/REQ-{id}-{feature-name}.md

## æ–¹æ¡ˆæ‘˜è¦

### å…³é”®å†³ç­–
{key_decisions}

### å®ç°ä»»åŠ¡ ({count} ä¸ª)
{implementation_tasks}

### é£é™©è¯„ä¼°
{risks}

### å‘ç‚¹è§„é¿æªæ–½
{pitfalls_addressed}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è¯· review è®¾è®¡æ–¹æ¡ˆï¼š
1. ç¡®è®¤æ–¹æ¡ˆå¯è¡Œï¼Œç»§ç»­å®ç°
2. éœ€è¦è°ƒæ•´æ–¹æ¡ˆ
3. æš‚åœï¼Œç¨åç»§ç»­

è¯·è¾“å…¥é€‰é¡¹ (1/2/3):
```

### Step 3.6: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "designing",
  "status": "completed",
  "design_doc": "context/tech/designs/REQ-{id}-{feature-name}.md",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "designing",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å®Œæˆï¼ŒåŒ…å« X ä¸ªå®ç°ä»»åŠ¡",
      "agent": "design-manager",
      "artifacts": ["context/tech/designs/REQ-{id}-{feature-name}.md"]
    }
  ]
}
```
âœ… Phase 3 å®Œæˆï¼šæ–¹æ¡ˆè®¾è®¡

è®¾è®¡æ–‡æ¡£: context/tech/designs/REQ-{id}-{feature-name}.md
å®ç°ä»»åŠ¡: {count} ä¸ª
é¢„ä¼°å·¥æ—¶: {total_effort}

æ­£åœ¨è¿›å…¥ Phase 4: ä»£ç å®ç°...

## Phase 4: ä»£ç å®ç°

### Step 4.1: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "implementing",
  "status": "in_progress",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "implementing",
      "status": "started",
      "timestamp": "{{timestamp}}",
      "note": "å¼€å§‹ä»£ç å®ç°",
      "agent": "implementation-executor"
    }
  ]
}
```

### Step 4.2: è°ƒç”¨ @implementation-executor

ä½¿ç”¨ Task å·¥å…·è°ƒç”¨ @implementation-executor Agentï¼š


```markdown
è¯·æ ¹æ®è®¾è®¡æ–¹æ¡ˆå®ç°ä»¥ä¸‹éœ€æ±‚ï¼š

## éœ€æ±‚ä¿¡æ¯
- éœ€æ±‚ID: REQ-{id}
- éœ€æ±‚æè¿°: $ARGUMENTS

## è®¾è®¡æ–¹æ¡ˆ
è¯·å…ˆè¯»å–ä»¥ä¸‹æ–‡ä»¶è·å–è®¾è®¡æ–¹æ¡ˆï¼š
1. .claude/state/current-design.json - è·å–å®ç°ä»»åŠ¡åˆ—è¡¨
2. {design_doc_path} - è·å–è¯¦ç»†è®¾è®¡æ–‡æ¡£

## å®ç°è¦æ±‚
1. æŒ‰ç…§ implementation_tasks åˆ—è¡¨é¡ºåºå®ç°
2. æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œæ›´æ–°ä»»åŠ¡çŠ¶æ€
3. éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒ
4. ç¼–å†™å¿…è¦çš„å•å…ƒæµ‹è¯•
5. æ³¨æ„è§„é¿å·²è¯†åˆ«çš„å†å²å‘ç‚¹

## å†å²å‘ç‚¹æé†’
{pitfalls_addressed}

## è¾“å‡º
1. å®ç°ä»£ç 
2. å•å…ƒæµ‹è¯•
3. æ›´æ–° current-design.json ä¸­çš„ä»»åŠ¡çŠ¶æ€
```

### Step 4.3: ç›‘æ§å®ç°è¿›åº¦
å®ç°è¿‡ç¨‹ä¸­ï¼Œå®šæœŸæ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼š

```markdown
ğŸ“Š å®ç°è¿›åº¦

ä»»åŠ¡åˆ—è¡¨:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚ æè¿°                        â”‚ çŠ¶æ€     â”‚ å®Œæˆæ—¶é—´ â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ åˆ›å»º AuthController         â”‚ âœ… å®Œæˆ  â”‚ 14:30    â”‚
â”‚ 2  â”‚ å®ç° TokenService           â”‚ ğŸ”„ è¿›è¡Œä¸­â”‚ -        â”‚
â”‚ 3  â”‚ æ·»åŠ ç™»å½• API                â”‚ â³ å¾…å¼€å§‹â”‚ -        â”‚
â”‚ 4  â”‚ ç¼–å†™å•å…ƒæµ‹è¯•                â”‚ â³ å¾…å¼€å§‹â”‚ -        â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¿›åº¦: 1/4 (25%)
```


### Step 4.4: å‘ç°æ–°å‘ç‚¹å¤„ç†

å¦‚æœåœ¨å®ç°è¿‡ç¨‹ä¸­å‘ç°æ–°çš„å‘ç‚¹ï¼š

```markdown
ğŸ’¡ å‘ç°æ–°å‘ç‚¹

åœ¨å®ç°è¿‡ç¨‹ä¸­å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š
{æ–°å‘ç‚¹æè¿°}

å»ºè®®è®°å½•æ­¤å‘ç‚¹ä»¥ä¾›åç»­å‚è€ƒã€‚

æ˜¯å¦è®°å½•ï¼Ÿ(Y/n)
å¦‚æœæ˜¯ï¼Œå°†æ‰§è¡Œ: /remember {å‘ç‚¹å†…å®¹}
```

### Step 4.5: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "implementing",
  "status": "completed",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "implementing",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "ä»£ç å®ç°å®Œæˆï¼Œå®Œæˆ X ä¸ªä»»åŠ¡",
      "agent": "implementation-executor",
      "artifacts": ["{modified_files}"]
    }
  ]
}
```
âœ… Phase 4 å®Œæˆï¼šä»£ç å®ç°

å®Œæˆä»»åŠ¡: {completed_count}/{total_count}
ä¿®æ”¹æ–‡ä»¶: {modified_files_count} ä¸ª
æ–°å¢æ–‡ä»¶: {new_files_count} ä¸ª

æ­£åœ¨è¿›å…¥ Phase 5: æµ‹è¯•éªŒè¯...

## Phase 5: æµ‹è¯•éªŒè¯

### Step 5.1: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "testing",
  "status": "in_progress",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "testing",
      "status": "started",
      "timestamp": "{{timestamp}}",
      "note": "å¼€å§‹æµ‹è¯•éªŒè¯",
      "agent": "test-agent"
    }
  ]
}
```

### Step 5.2: è°ƒç”¨ @test-agent

ä½¿ç”¨ Task å·¥å…·è°ƒç”¨ @test-agent Agentï¼š


```markdown
è¯·å¯¹ä»¥ä¸‹éœ€æ±‚è¿›è¡Œæµ‹è¯•éªŒè¯ï¼š

## éœ€æ±‚ä¿¡æ¯
- éœ€æ±‚ID: REQ-{id}
- éœ€æ±‚æè¿°: $ARGUMENTS

## è®¾è®¡æ–¹æ¡ˆ
è¯·å…ˆè¯»å–ä»¥ä¸‹æ–‡ä»¶äº†è§£éœ€æ±‚ï¼š
1. .claude/state/current-design.json
2. {design_doc_path}

## æµ‹è¯•è¦æ±‚
1. æ‰§è¡Œå·²æœ‰çš„å•å…ƒæµ‹è¯•
2. è®¾è®¡å¹¶æ‰§è¡Œé›†æˆæµ‹è¯•
3. éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
4. æ£€æŸ¥è¾¹ç•Œæ¡ä»¶
5. éªŒè¯å†å²å‘ç‚¹æ˜¯å¦å·²æ­£ç¡®å¤„ç†

## å†å²å‘ç‚¹éªŒè¯
{pitfalls_addressed}

## è¾“å‡º
1. æµ‹è¯•æŠ¥å‘Šä¿å­˜åˆ°: context/tech/test-reports/REQ-{id}-{date}.md
2. æµ‹è¯•ç»“æœæ‘˜è¦
```

### Step 5.3: æµ‹è¯•ç»“æœå¤„ç†

å¦‚æœæµ‹è¯•é€šè¿‡ï¼š
```markdown
âœ… æµ‹è¯•é€šè¿‡

æµ‹è¯•æŠ¥å‘Š: context/tech/test-reports/REQ-{id}-{date}.md

æµ‹è¯•æ‘˜è¦:
- å•å…ƒæµ‹è¯•: {passed}/{total} é€šè¿‡
- é›†æˆæµ‹è¯•: {passed}/{total} é€šè¿‡
- è¦†ç›–ç‡: {coverage}%

æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼Œå‡†å¤‡å®Œæˆéœ€æ±‚ã€‚
```

å¦‚æœæµ‹è¯•å¤±è´¥ï¼š
```markdown
âŒ æµ‹è¯•å¤±è´¥

æµ‹è¯•æŠ¥å‘Š: context/tech/test-reports/REQ-{id}-{date}.md

å¤±è´¥çš„æµ‹è¯•:
1. {test_name}: {failure_reason}
2. {test_name}: {failure_reason}

è¯·é€‰æ‹©æ“ä½œï¼š
1. è¿”å›å®ç°é˜¶æ®µä¿®å¤é—®é¢˜
2. æš‚åœï¼Œç¨åå¤„ç†
3. å¿½ç•¥å¤±è´¥ï¼Œç»§ç»­å®Œæˆï¼ˆä¸æ¨èï¼‰

è¯·è¾“å…¥é€‰é¡¹ (1/2/3):
```

### Step 5.4: æ›´æ–°éœ€æ±‚çŠ¶æ€

```json
{
  "phase": "testing",
  "status": "completed",
  "test_report": "context/tech/test-reports/REQ-{id}-{date}.md",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "testing",
      "status": "completed",
      "timestamp": "{{timestamp}}",
      "note": "æµ‹è¯•éªŒè¯å®Œæˆï¼Œé€šè¿‡ç‡ X%",
      "agent": "test-agent",
      "artifacts": ["context/tech/test-reports/REQ-{id}-{date}.md"]
    }
  ]
}
```
âœ… Phase 5 å®Œæˆï¼šæµ‹è¯•éªŒè¯

æµ‹è¯•æŠ¥å‘Š: context/tech/test-reports/REQ-{id}-{date}.md
é€šè¿‡ç‡: {pass_rate}%

æ­£åœ¨è¿›å…¥ Phase 6: å®Œæˆç¡®è®¤...

## Phase 6: å®Œæˆç¡®è®¤

### Step 6.1: æ›´æ–°éœ€æ±‚çŠ¶æ€ä¸ºå®Œæˆ

```json
{
  "status": "done",
  "phase": "completed",
  "completed_at": "{{timestamp}}",
  "updated_at": "{{timestamp}}",
  "history": [
    ...existing,
    {
      "phase": "completed",
      "status": "done",
      "timestamp": "{{timestamp}}",
      "note": "éœ€æ±‚å¼€å‘å®Œæˆ",
      "agent": "system"
    }
  ]
}
```

### Step 6.2: æ›´æ–°éœ€æ±‚ç´¢å¼•
æ›´æ–° .claude/state/requirements/index.json ä¸­å¯¹åº”éœ€æ±‚çš„çŠ¶æ€ã€‚

### Step 6.3: è¾“å‡ºå®Œæˆæ‘˜è¦

```markdown
ğŸ‰ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   éœ€æ±‚å¼€å‘å®Œæˆï¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ‰

## éœ€æ±‚ä¿¡æ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éœ€æ±‚ID:     REQ-{id}                                            â”‚
â”‚ æ ‡é¢˜:       $ARGUMENTS                                          â”‚
â”‚ çŠ¶æ€:       âœ… å®Œæˆ                                              â”‚
â”‚ Gitåˆ†æ”¯:    feature/req-{id}                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## äº§å‡ºç‰©
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ è®¾è®¡æ–‡æ¡£:  context/tech/designs/REQ-{id}-{feature}.md        â”‚
â”‚ ğŸ“‹ æµ‹è¯•æŠ¥å‘Š:  context/tech/test-reports/REQ-{id}-{date}.md      â”‚
â”‚ ğŸ“ ä¿®æ”¹æ–‡ä»¶:  {modified_files_count} ä¸ª                         â”‚
â”‚ â• æ–°å¢æ–‡ä»¶:  {new_files_count} ä¸ª                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## å¼€å‘ç»Ÿè®¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼€å§‹æ—¶é—´:   {created_at}                                        â”‚
â”‚ å®Œæˆæ—¶é—´:   {completed_at}                                      â”‚
â”‚ æ€»è€—æ—¶:     {duration}                                          â”‚
â”‚ å®ç°ä»»åŠ¡:   {completed_tasks}/{total_tasks}                     â”‚
â”‚ æµ‹è¯•é€šè¿‡ç‡: {pass_rate}%                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## å†å²è®°å½•
{history_summary}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ åç»­æ“ä½œå»ºè®®ï¼š
1. æäº¤ä»£ç : git add . && git commit -m "feat(REQ-{id}): $ARGUMENTS"
2. åˆ›å»º PR: git push origin feature/req-{id}
3. å¦‚æœ‰æ–°å‘ç°çš„å‘ç‚¹ï¼Œè¯·ä½¿ç”¨ /remember å‘½ä»¤è®°å½•

ğŸ“‹ ç›¸å…³å‘½ä»¤ï¼š
- /req-list          - æŸ¥çœ‹æ‰€æœ‰éœ€æ±‚
- /req-status REQ-{id} - æŸ¥çœ‹éœ€æ±‚è¯¦æƒ…
- /remember <å†…å®¹>   - è®°å½•ç»éªŒå’Œå‘ç‚¹
```

## æš‚åœå’Œæ¢å¤

### æš‚åœå½“å‰éœ€æ±‚

ç”¨æˆ·å¯ä»¥éšæ—¶ä¸­æ–­å¼€å‘ï¼Œéœ€æ±‚çŠ¶æ€ä¼šè‡ªåŠ¨ä¿å­˜ã€‚

åœ¨ä»»ä½•é˜¶æ®µè¾“å…¥ æš‚åœ æˆ– pauseï¼š

```markdown
â¸ï¸ éœ€æ±‚å·²æš‚åœ

éœ€æ±‚ID: REQ-{id}
å½“å‰é˜¶æ®µ: {phase}
çŠ¶æ€å·²ä¿å­˜åˆ°: .claude/state/requirements/REQ-{id}.json

æ¢å¤æ–¹å¼ï¼š
1. é‡æ–°æ‰§è¡Œ: /req-dev $ARGUMENTS
2. ä½¿ç”¨æ¢å¤å‘½ä»¤: /req-resume REQ-{id}
3. ä½¿ç”¨ä¼šè¯æ¢å¤: claude --resume
```

### æ¢å¤éœ€æ±‚

# æ–¹å¼ä¸€ï¼šé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼ˆä¼šè‡ªåŠ¨æ£€æµ‹å·²å­˜åœ¨çš„éœ€æ±‚ï¼‰
/req-dev $ARGUMENTS

# æ–¹å¼äºŒï¼šä½¿ç”¨æ¢å¤å‘½ä»¤
/req-resume REQ-{id}

# æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Claude Code ä¼šè¯æ¢å¤
claude --resume